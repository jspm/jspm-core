var _global="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var exports={};var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1};var Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t};var forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e);};var defineProp=function(){try{Object.defineProperty({},"_",{});return function(e,t,r){Object.defineProperty(e,t,{writable:true,enumerable:false,configurable:true,value:r});}}catch(e){return function(e,t,r){e[t]=r;}}}();var globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function NodeScript(e){if(!((this||_global)instanceof Script))return new Script(e);(this||_global).code=e;};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={});t.style.display="none";document.body.appendChild(t);var r=t.contentWindow;var n=r.eval,o=r.execScript;if(!n&&o){o.call(r,"null");n=r.eval;}forEach(Object_keys(e),(function(t){r[t]=e[t];}));forEach(globals,(function(t){e[t]&&(r[t]=e[t]);}));var c=Object_keys(r);var i=n.call(r,(this||_global).code);forEach(Object_keys(r),(function(t){(t in e||-1===indexOf(c,t))&&(e[t]=r[t]);}));forEach(globals,(function(t){t in e||defineProp(e,t,r[t]);}));document.body.removeChild(t);return i};Script.prototype.runInThisContext=function(){return eval((this||_global).code)};Script.prototype.runInNewContext=function(e){var t=Script.createContext(e);var r=this.runInContext(t);e&&forEach(Object_keys(t),(function(r){e[r]=t[r];}));return r};forEach(Object_keys(Script.prototype),(function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))};}));exports.isContext=function(e){return e instanceof Context};exports.createScript=function(e){return exports.Script(e)};exports.createContext=Script.createContext=function(e){var t=new Context;"object"===typeof e&&forEach(Object_keys(e),(function(r){t[r]=e[r];}));return t};

var Script$1 = exports.Script;
var createContext = exports.createContext;
var createScript = exports.createScript;
var isContext = exports.isContext;
var runInContext = exports.runInContext;
var runInNewContext = exports.runInNewContext;
var runInThisContext = exports.runInThisContext;

export default exports;
export { Script$1 as Script, createContext, createScript, isContext, runInContext, runInNewContext, runInThisContext };
